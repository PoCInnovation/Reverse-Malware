const { getValueArg } = require("../../../ast_utils");
const { bbystealsurheartwithlovebrunxkd$2kwqqf } = require("../../../vars/encrypted_vars");
const { handleDefProxies } = require("../../proxy/proxy");
const { ast_dynamicIndexes } = require("../funcs");

// if (decl.id.name === 'bbystealsurheartwithlovebrunxkd$oth1jj') {
// }
// if (funcName !== 'bbystealsurheartwithlovebrunxkd$oth1jj'
//     && funcName !== 'bbystealsurheartwithlovebrunxkd$ukyoii') {
//     return;
// }

// const ast_dynamicIndxArgType = {
// 	Value: 0,
// 	Callee: 1,
// }

function defineDynamicIndexer(funcName, node, scope, declaration) {
    if (node.type === 'CallExpression') { // proxy def
        return handleDefProxies(funcName, node, scope, declaration);
    }
    let res;
    if (node.callee) { // value
        res = getValueArg(node);
        if (res == null)
            return;
    } else { // func callee
        const rawArg = node.property.right; //.arguments[0];
        res = getValueArg(rawArg);
        if (res == null)
            return;
    }

    scope.setElementInScope(funcName, function(val) {
        return bbystealsurheartwithlovebrunxkd$2kwqqf[val + res];
    }, declaration);
    ast_dynamicIndexes.add(funcName);
}



module.exports = { defineDynamicIndexer };
